《拾谷 · ShiGu》前端开发需求文档 (V1.0)
一、 项目愿景与设计风格
1.1 项目定位
一套面向高级收纳需求的二次元资产管理系统。强调**“金属质感”与“数字化橱窗”**的视觉体验。
1.2 视觉规范 (香槟镭射 - Champagne Laser)
主色 (Brand): #D4AF37 (香槟金) —— 用于边框、图标高亮、重要标题。模拟谷子的金属包边。
辅助色 (Secondary): #F5F5F7 (明亮灰) —— 用于卡片背景、输入框底色。
点缀色 (Accent): #A29BFE (镭射紫) —— 用于主要按钮（Primary Button）、加载条、幻彩渐变效果。
背景色 (BG): #FFFFFF (纯白) —— 保持界面的呼吸感。
UI 特色建议：
卡片建议使用 1px 的香槟金细边框。
交互元素（如悬浮）可增加极其微弱的镭射渐变动效（模拟马口铁细闪）。
二、 核心页面结构 (IA)
2.1 云展柜 (快速检索页 - 核心)
功能： 毫秒级筛选定位谷子。
组件构成：
全局搜索栏： 支持防抖输入，对应接口 search 参数。
多维筛选组： IP（下拉）、角色（联动下拉）、品类（标签组）、状态（分段控制器）、位置（树选择器）。
瀑布流/网格列表： 展示谷子主图、名称、位置路径（location_path）。
详情侧滑窗 (Drawer)： 点击卡片从右侧滑出，展示完整详情 + 多图画廊。
2.2 物理收纳地图 (位置管理)
功能： 管理“卧室-柜子-抽屉”的层级。
组件构成：
左侧树形导航： 展示 StorageNode。
右侧详情： 展示当前位置的照片、备注，以及该位置下的所有谷子列表。
2.3 资产录入 (CRUD)
功能： 快速录入新入手的谷子。
关键点： 支持图片上传、IP 与角色的联动选择。
三、 技术要求与接口集成
3.1 技术栈
框架： Vue 3 (Composition API)
状态管理： Pinia (持久化存储位置树数据)
构建工具： Vite
UI 库： Element Plus (需自定义主题色以符合“香槟镭射”风格)
3.2 接口对接要点 (基于 api.md)
位置树缓存： 页面初始化请求 GET /api/location/tree/，存入 Pinia。前端需实现一个递归工具函数，将扁平数据转换为 el-tree 需要的嵌套结构。
高性能检索：
搜索框必须做 300ms 防抖处理，避免触发后端限流 (60次/分)。
列表请求使用 GET /api/goods/，利用后端“瘦身”后的字段。
图片展示：
主图展示需处理 null 情况（显示占位图）。
详情页多图使用 el-image 的预览大图功能（Image Preview）。
四、 关键交互行为设计
4.1 联动筛选逻辑
当用户在“IP”下拉框选择了「崩坏：星穹铁道」时，下一级“角色”下拉框应自动过滤，仅显示属于该 IP 的角色（流萤、卡夫卡等）。
4.2 “在哪儿”的直观展示
在谷子列表卡片上，位置路径 location_path 采用面包屑风格展示：卧室 > A1柜 > 第三层。
点击路径，应能跳转或定位到位置管理页对应的节点。
4.3 幂等性友好提示
在录入谷子时，如果后端返回已有实例（触发幂等逻辑），前端应弹出温馨提示：“检测到相同资产已存在，已为您跳转至编辑页面/更新数量”。
五、 前端代码组织建议 (Store 模块)
useLocationStore
State: nodes (原始数组), treeData (计算属性，树结构)。
Actions: fetchNodes() 获取数据, getPathById(id) 根据 ID 获取完整路径字符串。
useGuziStore
State: guziList (当前搜索结果), loading, filters (当前的搜索条件)。
Actions: searchGuzi() 调用接口并更新结果。
六、 开发者验收标准
加载性能： 首屏加载位置树和首屏谷子列表，总耗时不超过 1.5s（基于内网环境）。
视觉还原： 必须体现 #D4AF37 香槟金的质感，页面整体呈现干净的“收纳感”。
兼容性： 必须适配移动端浏览器（吃谷人经常边整理边翻手机）。
异常处理： 当后端触发 ScopedRateThrottle 限流时，前端应显示“搜索太快了，请稍后再试”。
PM 寄语：
这份文档不仅规定了你要做什么，还规定了“拾谷”作为一个品牌该有的样子。重点在检索的快和界面的精致感。如果有任何技术卡点，随时找我评审。